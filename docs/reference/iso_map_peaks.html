<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Map peaks based on retention time — iso_map_peaks • isoprocessor</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />
<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/simplex/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Map peaks based on retention time — iso_map_peaks" />

<meta property="og:description" content="This function makes it easy to map peaks based on peak maps. It reports all peaks including missing peaks and ambiguous peaks by adding a set of information columns for each entry (is_identified, is_missing, is_ambiguous, n_matches, n_overlapping).
For routine downstream data processing, this function is usually followed by iso_get_problematic_peaks to inspect the problematic peaks and iso_remove_problematic_peaks to proceed only with peaks that do not have any problems. Note that without this filter, one must proceed with great caution interpreting the ambiguous peaks." />

<meta property="og:image" content="http://isoprocessor.isoverse.org/logo.png" />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-106138361-4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-106138361-4');
</script>

  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">isoprocessor</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="in active development">0.3.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/dual_inlet.html">Dual Inlet</a>
</li>
<li>
  <a href="../articles/continuous_flow.html">Continuous Flow</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/isoverse/isoprocessor">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Map peaks based on retention time</h1>
    <small class="dont-index">Source: <a href='https://github.com/isoverse/isoprocessor/blob/master/R/peak_mapping.R'><code>R/peak_mapping.R</code></a></small>
    <div class="hidden name"><code>iso_map_peaks.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>This function makes it easy to map peaks based on peak maps. It reports all peaks including missing peaks and ambiguous peaks by adding a set of information columns for each entry (<code>is_identified</code>, <code>is_missing</code>, <code>is_ambiguous</code>, <code>n_matches</code>, <code>n_overlapping</code>).
For routine downstream data processing, this function is usually followed by <code><a href='iso_get_problematic_peaks.html'>iso_get_problematic_peaks</a></code> to inspect the problematic peaks and <code><a href='iso_remove_problematic_peaks.html'>iso_remove_problematic_peaks</a></code> to proceed only with peaks that do not have any problems. Note that without this filter, one must proceed with great caution interpreting the ambiguous peaks.</p>
    
    </div>

    <pre class="usage"><span class='fu'>iso_map_peaks</span>(<span class='no'>dt</span>, <span class='no'>peak_maps</span>, <span class='kw'>file_id</span> <span class='kw'>=</span> <span class='fu'>default</span>(<span class='no'>file_id</span>),
  <span class='kw'>map_id</span> <span class='kw'>=</span> <span class='fu'>default</span>(<span class='no'>map_id</span>), <span class='kw'>compound</span> <span class='kw'>=</span> <span class='fu'>default</span>(<span class='no'>compound</span>),
  <span class='kw'>rt</span> <span class='kw'>=</span> <span class='fu'>default</span>(<span class='no'>rt</span>), <span class='kw'>rt_start</span> <span class='kw'>=</span> <span class='fu'>default</span>(<span class='no'>rt_start</span>),
  <span class='kw'>rt_end</span> <span class='kw'>=</span> <span class='fu'>default</span>(<span class='no'>rt_end</span>), <span class='kw'>rt_prefix_divider</span> <span class='kw'>=</span> <span class='st'>":"</span>,
  <span class='kw'>quiet</span> <span class='kw'>=</span> <span class='fu'>default</span>(<span class='no'>quiet</span>))</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>dt</th>
      <td><p>data frame with peak data</p></td>
    </tr>
    <tr>
      <th>peak_maps</th>
      <td><p>data frame with the peak map</p></td>
    </tr>
    <tr>
      <th>file_id</th>
      <td><p>the column(s) in dt that uniquely identify a file/set of peaks that belong together</p></td>
    </tr>
    <tr>
      <th>map_id</th>
      <td><p>the column in dt that indicates which map to use for which file</p></td>
    </tr>
    <tr>
      <th>compound</th>
      <td><p>the column in peak_maps that holds compound information</p></td>
    </tr>
    <tr>
      <th>rt</th>
      <td><p>the column in dt and colum prefix in peak_maps ("rt:...") that holds retention time information</p></td>
    </tr>
    <tr>
      <th>rt_start</th>
      <td><p>the column in dt that holds start of peak retention times</p></td>
    </tr>
    <tr>
      <th>rt_end</th>
      <td><p>the column in dt that holds end of peak retention times</p></td>
    </tr>
    <tr>
      <th>rt_prefix_divider</th>
      <td><p>the divider after the retention time column prefix in peak_maps to identify the map id values (e.g. "rt:map_id_value")</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>data frame with mapped peaks and the following information columns:</p><ul>
<li><p><code>is_identified</code>: a logical TRUE/FALSE indicating peaks that have been successfully identified (includes missing peaks from the peak map!) (note that this information could also be derived from !is.na(compound) but is provided for convenience)</p></li>
<li><p><code>is_missing</code>: a logical TRUE/FALSE indicating peaks that are in the peak map definition but have no matching peak</p></li>
<li><p><code>is_ambiguous</code>: a logical TRUE/FALSE indicating peaks that are ambiguous in their definition either because they have multiple matches or because they overlap with other, overlapping peaks that were identified the same (note that this information could also be derived from n_overlapping &gt; 1 | n_matches &gt; 1 but is provided for convenience)</p></li>
<li><p><code>n_matches</code>: the number of matches each peak has in the peak map</p></li>
<li><p><code>n_overlapping</code>: the number of overlapping peaks that match the same peak definition</p></li>
</ul>

    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>Other peak mapping functions: <code><a href='iso_get_problematic_peaks.html'>iso_get_problematic_peaks</a></code>,
  <code><a href='iso_remove_problematic_peaks.html'>iso_remove_problematic_peaks</a></code></p></div>
    

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#see-also">See also</a></li>
          </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Sebastian Kopf.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

